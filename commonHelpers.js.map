{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nlet searchTerm = '';\n\nloader.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  loader.style.display = 'block';\n  searchTerm = e.target.elements.input.value;\n  currentPage = 1;\n  gallery.innerHTML = '';\n  await getPhotos(searchTerm, currentPage);\n  e.target.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  currentPage++;\n  await getPhotos(searchTerm, currentPage);\n});\n\nasync function getPhotos(searchTerm, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '42200022-9c7e7676f0f903944c054771a',\n        q: searchTerm,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: page,\n      },\n    });\n    const { data } = response;\n    createGallery(data.hits);\n    const totalHits = data.totalHits;\n    if (totalHits <= page * 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n    smoothScroll();\n  } catch (error) {\n    console.error('Error fetching photos:', error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction createGallery(images) {\n  const galleryHTML = images\n    .map(\n      image => `\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n  <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n  <div class=\"img-content\">\n    <div>\n      <h3>Likes</h3>\n      <p>${image.likes}</p>\n    </div>\n    <div>\n      <h3>Views</h3>\n      <p>${image.views}</p>\n    </div>\n    <div>\n      <h3>Comments</h3>\n      <p>${image.comments}</p>\n    </div>\n    <div>\n      <h3>Downloads</h3>\n      <p>${image.downloads}</p>\n    </div>\n  </div>\n</a>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', galleryHTML);\n  new SimpleLightbox('.gallery-link');\n}\n\nfunction smoothScroll() {\n  const cardHeight = document\n    .querySelector('.gallery-link')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["form","gallery","loader","loadMoreBtn","currentPage","searchTerm","e","getPhotos","page","response","axios","data","createGallery","iziToast","smoothScroll","error","images","galleryHTML","image","SimpleLightbox","cardHeight"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAc,EACdC,EAAa,GAEjBH,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,OAE5BH,EAAK,iBAAiB,SAAU,MAAMM,GAAK,CACzCA,EAAE,eAAc,EAChBJ,EAAO,MAAM,QAAU,QACvBG,EAAaC,EAAE,OAAO,SAAS,MAAM,MACrCF,EAAc,EACdH,EAAQ,UAAY,GACpB,MAAMM,EAAUF,EAAYD,CAAW,EACvCE,EAAE,OAAO,OACX,CAAC,EAEDH,EAAY,iBAAiB,QAAS,SAAY,CAChDD,EAAO,MAAM,QAAU,QACvBE,IACA,MAAMG,EAAUF,EAAYD,CAAW,CACzC,CAAC,EAED,eAAeG,EAAUF,EAAYG,EAAM,CACzC,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMG,CACP,CACP,CAAK,EACK,CAAE,KAAAG,CAAM,EAAGF,EACjBG,EAAcD,EAAK,IAAI,EACLA,EAAK,WACNH,EAAO,IACtBL,EAAY,MAAM,QAAU,OAC5BU,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDV,EAAY,MAAM,QAAU,QAE9BW,GACD,OAAQC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRb,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASU,EAAcI,EAAQ,CAC7B,MAAMC,EAAcD,EACjB,IACCE,GAAS;AAAA,sCACuBA,EAAM,aAAa;AAAA,oCACrBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,WAI/DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,WAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,WAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,WAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAKrB,EACA,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAW,EACnD,IAAIE,EAAe,eAAe,CACpC,CAEA,SAASL,GAAe,CACtB,MAAMM,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}